(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{18:function(e,t,a){},26:function(e,t,a){e.exports=a(48)},48:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(14),r=a.n(o),l=(a(18),a(4)),s=a(2),i=a(5),m="https://tshirtbackend.herokuapp.com/api/",u=a(22),d=a(1),f=function(e){if(void 0!==typeof window){localStorage.removeItem("cart");localStorage.setItem("cart",JSON.stringify([])),e()}},p=function(){return void 0!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},g=function(e){var t=p()&&p().user.id;if(console.log("USERID: ",t),void 0!==typeof window)return localStorage.removeItem("jwt"),f((function(){})),fetch("".concat(m,"user/logout/").concat(t),{method:"GET"}).then((function(t){console.log("Signout success"),e()})).catch((function(e){return console.log(e)}))},E=function(e,t){return e.location.pathname===t?{color:"#2ecc72"}:{color:"#FFFFFF"}},b=Object(s.g)((function(e){var t=e.history;e.path;return c.a.createElement("div",null,c.a.createElement("ul",{className:"nav nav-tabs bg-dark"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{style:E(t,"/"),className:"nav-link",to:"/"},"Home")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{style:E(t,"/cart"),className:"nav-link",to:"/cart"},"Cart")),p()&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{style:E(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard"},"dashboard")),!p()&&c.a.createElement(n.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{style:E(t,"/signup"),className:"nav-link",to:"/signup"},"Signup")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{style:E(t,"/signin"),className:"nav-link",to:"/signin"},"Signin"))),p()&&c.a.createElement("li",{className:"nav-item"},c.a.createElement("span",{onClick:function(){g((function(){t.push("/")}))},className:"nav-link text-warning"},"Signout"))))})),v=function(e){var t=e.title,a=void 0===t?"My Title":t,n=e.description,o=void 0===n?"My description":n,r=e.className,l=void 0===r?"bg-dark text-white p-4":r,s=e.children;return c.a.createElement("div",null,c.a.createElement(b,null),c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"jumbotron bg-dark text-white text-center"},c.a.createElement("h2",{className:"display-4"},a),c.a.createElement("p",{className:"lead"},o)),c.a.createElement("div",{className:l},s)),c.a.createElement("footer",{className:"footer bg-dark mt-auto py-3"},c.a.createElement("div",{className:"container-fluid bg-success text-white text-center py-3"},c.a.createElement("h4",null,"If you got any questions, reach me out at instagram"),c.a.createElement("button",{className:"btn btn-warning btn-lg"},"Contact Us"),c.a.createElement("div",{className:"container"},c.a.createElement("span",{className:"text-warning"},"An Amazing Django React fullstack course")))))},h=function(e){var t=e.product,a=t?t.image:"https://images.pexels.com/photos/3561339/pexels-photo-3561339.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940";return c.a.createElement("div",{className:"rounded border border-success p-2"},c.a.createElement("img",{src:a,style:{maxHeight:"100%",maxWidth:"100%"},className:"mb-3 rounded",alt:""}))},N=function(e){var t=e.product,a=e.addtoCart,o=void 0===a||a,r=e.removeFromCart,l=void 0!==r&&r,m=e.reload,u=void 0===m?void 0:m,f=e.setReload,g=void 0===f?function(e){return e}:f,E=Object(n.useState)(!1),b=Object(i.a)(E,2),v=b[0],N=b[1],O=t?t.name:"A photo from pexels",j=t?t.description:"Default description",w=t?t.price:"Default";return c.a.createElement("div",{className:"card text-white bg-dark border border-info "},c.a.createElement("div",{className:"card-header lead"},O),c.a.createElement("div",{className:"card-body"},function(e){if(e)return c.a.createElement(s.a,{to:"/cart"})}(v),c.a.createElement(h,{product:t}),c.a.createElement("p",{className:"lead bg-success font-weight-normal text-wrap"},j),c.a.createElement("p",{className:"btn btn-success rounded  btn-sm px-4"},"$ ",w),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},function(e){return o&&c.a.createElement("button",{onClick:e,className:"btn btn-block btn-outline-success mt-2 mb-2"},"Add to Cart")}((function(){p()?(!function(e,t){var a=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(d.a)({},e)),localStorage.setItem("cart",JSON.stringify(a)),t())}(t,(function(){return N(!0)})),console.log("Added to cart")):console.log("Login Please!")}))),c.a.createElement("div",{className:"col-12"},function(e){return e&&c.a.createElement("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,n){a.id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t.id),g(!u),console.log("Product removed from cart")},className:"btn btn-block btn-outline-danger mt-2 mb-2"},"Remove from cart")}(l)))))};function O(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),l=Object(i.a)(r,2),s=l[0],u=l[1],d=function(){fetch("".concat(m,"product"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?(u(e.error),console.log(s)):o(e)}))};return Object(n.useEffect)((function(){d()}),[]),c.a.createElement(v,{title:"Home Page",description:"Welcome to Tshirt store"},c.a.createElement("h1",null,"Home component"),c.a.createElement("div",{className:"row"},a.map((function(e,t){return c.a.createElement("div",{key:t,className:"col-4 mb-4"},c.a.createElement(N,{product:e}))}))))}var j=a(11),w=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(i.a)(e,2),a=t[0],o=t[1],r=a.name,s=a.email,u=a.password,f=a.error,p=a.success,g=function(e){return function(t){o(Object(d.a)(Object(d.a)({},a),{},Object(j.a)({error:!1},e,t.target.value)))}},E=function(e){var t;e.preventDefault(),o(Object(d.a)(Object(d.a)({},a),{},{error:!1})),(t={name:r,email:s,password:u},fetch("".concat(m,"user/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){console.log("DATA",e),e.email===s?o(Object(d.a)(Object(d.a)({},a),{},{name:"",email:"",password:"",error:"",success:!0})):o(Object(d.a)(Object(d.a)({},a),{},{error:!0,success:!1}))})).catch((function(e){return console.log(e)}))};return c.a.createElement(v,{title:"Sign Up Page",description:"A signup for LCO user"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 offset-sm-3 text-left"},c.a.createElement("div",{className:"alert alert-success",style:{display:p?"":"none"}},"New account created successfully. Please ",c.a.createElement(l.b,{to:"/signin"},"login now.")))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 offset-sm-3 text-left"},c.a.createElement("div",{className:"alert alert-danger",style:{display:f?"":"none"}},"Check all fields again"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 offset-sm-3 text-left"},c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-light"},"Name"),c.a.createElement("input",{className:"form-control",value:r,onChange:g("name"),type:"text"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-light"},"Email"),c.a.createElement("input",{className:"form-control",value:s,onChange:g("email"),type:"text"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-light"},"password"),c.a.createElement("input",{className:"form-control",value:u,onChange:g("password"),type:"password"})),c.a.createElement("button",{onClick:E,className:"btn btn-success btn-block"},"Submit")))))},y=a(25),S=function(e){var t=e.component,a=Object(y.a)(e,["component"]);return c.a.createElement(s.b,Object.assign({},a,{render:function(e){return p()?c.a.createElement(t,e):c.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},k=function(){return c.a.createElement(v,{title:"User dashboard"},c.a.createElement("h1",null,"Welcome to user dashboard page"))},x=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1,loading:!1,didRedirect:!1}),t=Object(i.a)(e,2),a=t[0],o=t[1],r=(a.name,a.email),l=a.password,f=(a.error,a.success,a.loading),g=(a.didRedirect,function(e){return function(t){o(Object(d.a)(Object(d.a)({},a),{},Object(j.a)({error:!1},e,t.target.value)))}}),E=function(e){e.preventDefault(),o(Object(d.a)(Object(d.a)({},a),{},{error:!1,loading:!0})),function(e){var t=new FormData;for(var a in e)console.log(e[a]),t.append(a,e[a]);var n,c=Object(u.a)(t.keys());try{for(c.s();!(n=c.n()).done;){var o=n.value;console.log("MYKEY: ",o)}}catch(r){c.e(r)}finally{c.f()}return fetch("".concat(m,"user/login/"),{method:"POST",body:t}).then((function(e){return console.log("SUCCESS",e),e.json()})).catch((function(e){return console.log(e)}))}({email:r,password:l}).then((function(e){console.log("DATA",e),e.token?function(e,t){void 0!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){console.log("TOKKEN ADDED"),o(Object(d.a)(Object(d.a)({},a),{},{didRedirect:!0}))})):o(Object(d.a)(Object(d.a)({},a),{},{loading:!1}))})).catch((function(e){return console.log(e)}))};return c.a.createElement(v,{title:"Welcome to sign in page",description:"A tshirt store"},f&&c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("h2",null,"Loading...")),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 offset-sm-3 text-left"},c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-light"},"Email"),c.a.createElement("input",{name:"email",className:"form-control",value:r,onChange:g("email"),type:"text"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-light"},"password"),c.a.createElement("input",{name:"password",className:"form-control",value:l,onChange:g("password"),type:"password"})),c.a.createElement("button",{onClick:E,className:"btn btn-success btn-block"},"Submit")))),function(){if(p())return c.a.createElement(s.a,{to:"/"})}())},C=a(24),T=a.n(C),I=function(e){var t=e.products,a=e.reload,o=void 0===a?void 0:a,r=e.setReload,l=void 0===r?function(e){return e}:r,u=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{}}),E=Object(i.a)(u,2),b=E[0],v=E[1],h=p&&p().user.id,N=p&&p().token,O=function(e,t){(function(e,t){return fetch("".concat(m,"payment/gettoken/").concat(e,"/").concat(t,"/"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){if(e.error)v(Object(d.a)(Object(d.a)({},e),{},{error:e.error})),g((function(){return c.a.createElement(s.a,{to:"/"})}));else{var t=e.clientToken;v({clientToken:t})}}))};Object(n.useEffect)((function(){O(h,N)}),[]);var j=function(){var e=0;return t.map((function(t){e+=parseInt(t.price)})),e},w=function(){v({loading:!0});b.instance.requestPaymentMethod().then((function(e){console.log("MYDATA",e);var a={paymentMethodNonce:e.nonce,amount:j()};(function(e,t,a){var n=new FormData;for(var c in a)n.append(c,a[c]);return fetch("".concat(m,"payment/process/").concat(e,"/").concat(t,"/"),{method:"POST",body:n}).then((function(e){return console.log("p-0",e),e.json()}))})(h,N,a).then((function(e){if(console.log("POINT-1",e),e.error)"1"==e.code&&(console.log("PAYMENT Failed!"),g((function(){return c.a.createElement(s.a,{to:"/"})})));else{v(Object(d.a)(Object(d.a)({},b),{},{success:e.success,loading:!1})),console.log("PAYMENT SUCCESS");var a="";t.forEach((function(e){a+=e.name+", "}));var n={products:a,transaction_id:e.transaction.id,amount:e.transaction.amount};(function(e,t,a){var n=new FormData;for(var c in a)n.append(c,a[c]);return fetch("".concat(m,"order/add/").concat(e,"/").concat(t,"/"),{method:"POST",body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(h,N,n).then((function(e){e.error?"1"==e.code&&(console.log("Order Failed!"),g((function(){return c.a.createElement(s.a,{to:"/"})}))):1==e.success&&console.log("ORDER PLACED!!")})).catch((function(e){v({loading:!1,success:!1}),console.log("Order FAILED",e)})),f((function(){console.log("Did we got a crash?")})),l(!o)}})).catch((function(e){v({loading:!1,success:!1}),console.log("PAYMENT FAILED",e)}))}))};return c.a.createElement("div",null,c.a.createElement("h3",null,"Your bill is $ ",j()),c.a.createElement("div",null,null!==b.clientToken&&t.length>0?c.a.createElement("div",null,c.a.createElement(T.a,{options:{authorization:b.clientToken},onInstance:function(e){return b.instance=e}}),c.a.createElement("button",{onClick:w,className:"btn btn-block btn-success"},"Buy Now")):c.a.createElement("h3",null,"Please login first or add something in cart")))},A=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)([]),l=Object(i.a)(r,2),s=l[0],m=l[1];Object(n.useEffect)((function(){m(function(){if(void 0!==typeof window&&localStorage.getItem("cart"))return JSON.parse(localStorage.getItem("cart"))}())}),[a]);return c.a.createElement(v,{title:"Cart page",description:"Welcome to checkout"},c.a.createElement("div",{className:"row text-center"},c.a.createElement("div",{className:"col-6"},s.length>0?function(e){return c.a.createElement("div",null,e.map((function(e,t){return c.a.createElement(N,{key:t,product:e,removeFromCart:!0,addtoCart:!1,reload:a,setReload:o})})))}(s):c.a.createElement("h4",null,"No products")),c.a.createElement("div",{className:"col-6"},s.length>0?c.a.createElement(I,{products:s,setReload:o}):c.a.createElement("h3",null,"Please login or add something in cart"))))},D=function(){return c.a.createElement(l.a,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",exact:!0,component:O}),c.a.createElement(s.b,{path:"/signup",exact:!0,component:w}),c.a.createElement(s.b,{path:"/signin",exact:!0,component:x}),c.a.createElement(s.b,{path:"/cart",exact:!0,component:A}),c.a.createElement(S,{path:"/user/dashboard",exact:!0,component:k})))};r.a.render(c.a.createElement(D,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.8f19db1c.chunk.js.map